<?xml version="1.1" encoding="UTF-8"?><!DOCTYPE building SYSTEM "building.dtd">
<building worker="MELTER" workradius="0">

	<ground groundtype="GRASS" />
	<ground groundtype="EARTH" />
	<ground groundtype="FLATTENED" />

	<blocked dx="-3" dy="1" block="true" />
	<blocked dx="-2" dy="2" block="false" />
	<blocked dx="-1" dy="3" block="true" />
	<blocked dx="0" dy="4" block="true" />
	<blocked dx="1" dy="4" block="true" />
	<blocked dx="2" dy="4" block="true" />
	<blocked dx="2" dy="2" block="true" />
	<blocked dx="2" dy="1" block="true" />
	<blocked dx="2" dy="-1" block="true" />
	<blocked dx="2" dy="-2" block="true" />
	<blocked dx="3" dy="-1" block="true" />
	<blocked dx="-2" dy="1" block="true" />
	<blocked dx="-1" dy="2" block="true" />
	<blocked dx="0" dy="3" block="true" />
	<blocked dx="-2" dy="0" block="true" />
	<blocked dx="-3" dy="0" block="true" />
	<blocked dx="-3" dy="-1" block="true" />
	<blocked dx="-1" dy="1" block="true" />
	<blocked dx="0" dy="2" block="true" />
	<blocked dx="1" dy="3" block="true" />
	<blocked dx="1" dy="2" block="true" />
	<blocked dx="1" dy="1" block="true" />
	<blocked dx="1" dy="0" block="true" />
	<blocked dx="1" dy="-1" block="true" />
	<blocked dx="1" dy="-2" block="true" />
	<blocked dx="1" dy="-3" block="true" />
	<blocked dx="0" dy="1" block="true" />
	<blocked dx="0" dy="0" block="true" />
	<blocked dx="0" dy="-1" block="true" />
	<blocked dx="0" dy="-2" block="true" />
	<blocked dx="0" dy="-3" block="true" />
	<blocked dx="0" dy="-4" block="true" />
	<blocked dx="-1" dy="0" block="true" />
	<blocked dx="-1" dy="-1" block="true" />
	<blocked dx="-1" dy="-2" block="true" />
	<blocked dx="-1" dy="-3" block="true" />
	<blocked dx="-1" dy="-4" block="true" />
	<blocked dx="-2" dy="-1" block="true" />
	<blocked dx="-2" dy="-2" block="true" />
	<blocked dx="-2" dy="-3" block="true" />
	<blocked dx="-2" dy="-4" block="true" />
	<blocked dx="-2" dy="-5" block="true" />
	<blocked dx="-2" dy="-6" block="true" />
	<blocked dx="-3" dy="-2" block="true" />
	<blocked dx="-3" dy="-3" block="true" />
	<blocked dx="-1" dy="-5" block="true" />
	<blocked dx="2" dy="0" block="false" />
	<blocked dx="2" dy="3" block="false" />
	<blocked dx="-3" dy="-4" block="false" />
	<blocked dx="-3" dy="-5" block="false" />
	<blocked dx="-3" dy="-6" block="false" />
	<blocked dx="-3" dy="-7" block="false" />
	<blocked dx="-2" dy="-7" block="false" />
	<blocked dx="0" dy="-5" block="false" />
	<blocked dx="-1" dy="-6" block="false" />
	<blocked dx="2" dy="-3" block="false" />
	<blocked dx="1" dy="-4" block="false" />
	<blocked dx="3" dy="-2" block="false" />
	<blocked dx="4" dy="-1" block="false" />
	<blocked dx="4" dy="0" block="false" />
	<blocked dx="4" dy="1" block="false" />
	<blocked dx="3" dy="0" block="false" />
	<blocked dx="3" dy="1" block="false" />
	<blocked dx="4" dy="2" block="false" />
	<blocked dx="3" dy="2" block="false" />
	<blocked dx="4" dy="3" block="false" />
	<blocked dx="3" dy="3" block="false" />
	<blocked dx="4" dy="4" block="false" />
	<blocked dx="3" dy="4" block="false" />
	<blocked dx="0" dy="5" block="false" />
	<blocked dx="1" dy="5" block="false" />
	<blocked dx="2" dy="5" block="false" />
	<blocked dx="3" dy="5" block="false" />
	<blocked dx="4" dy="5" block="false" />
	<blocked dx="-1" dy="4" block="false" />
	<blocked dx="-2" dy="3" block="false" />
	<blocked dx="-3" dy="2" block="false" />
	<blocked dx="-4" dy="1" block="false" />
	<blocked dx="-4" dy="0" block="false" />
	<blocked dx="-4" dy="-1" block="false" />
	<blocked dx="-4" dy="-2" block="false" />
	<blocked dx="-4" dy="-3" block="false" />
	<blocked dx="-4" dy="-4" block="false" />
	<blocked dx="-4" dy="-5" block="false" />

	<door dx="3" dy="1" />

	<constructionStack dx="3" dy="5" material="PLANK" buildrequired="7" />
	<constructionStack dx="0" dy="5" material="STONE" buildrequired="4" />
	<requestStack dx="-3" dy="2" material="COAL" />
	<requestStack dx="3" dy="3" material="IRONORE" />
	<offerStack dx="4" dy="0" material="IRON" />

	<bricklayer dx="-1" dy="4" direction="NORTH_EAST" />
	<bricklayer dx="-3" dy="2" direction="NORTH_EAST" />
	<bricklayer dx="3" dy="0" direction="NORTH_WEST" />
	<bricklayer dx="3" dy="2" direction="NORTH_WEST" />
	<bricklayer dx="2" dy="3" direction="NORTH_WEST" />

	<flag dx="0" dy="-3" />

	<buildmark dx="-3" dy="1" />
	<buildmark dx="-1" dy="2" />
	<buildmark dx="1" dy="1" />
	<buildmark dx="2" dy="2" />
	<buildmark dx="3" dy="-1" />
	<buildmark dx="-2" dy="-6" />

	<image file="14" for="GUI" type="GUI" sequence="24" image="0" />
	<image file="13" type="SETTLER" for="FINAL" image="0" sequence="9" />
	<image file="13" type="SETTLER" for="BUILD" image="1" sequence="9" />

	<startjob name="gohome" />

	<!-- going home job -->
	<job name="gohome" 		type="GO_TO" 		successjob="hide" 		failjob="hide" 	 dx="3" dy="1" />
	<job name="hide" 		type="HIDE" 		successjob="reset"		failjob="reset" />
	<job name="reset" 		type="SET_MATERIAL" successjob="wait" 		failjob="wait" 	 material="NO_MATERIAL" />


	<!-- pre start -->
	<job name="wait" 		type="WAIT" 		successjob="checkA1" 	failjob="checkA1" time="1.0" />
	<job name="checkA1" 	type="AVAILABLE" 	successjob="checkA2" 	failjob="wait"   dx="-3" dy="2" material="COAL" />
	<job name="checkA2" 	type="AVAILABLE" 	successjob="checkA3" 	failjob="wait"   dx="3" dy="3" material="IRONORE" />
	<job name="checkA3" 	type="NOT_FULL" 	successjob="leaveHouse" failjob="wait" 	 dx="4" dy="0" />

	<!-- leave the building -->
	<job name="leaveHouse" 	type="SHOW" 		successjob="toore1" 	failjob="gohome" dx="3" dy="1" />

	<!-- go to the ore stack -->
	<job name="toore1" 		type="WALK" 		successjob="toore2" 	failjob="gohome" direction="SOUTH_WEST" />
	<job name="toore2" 		type="WALK" 		successjob="lookatore" 	failjob="gohome" direction="SOUTH_WEST" />
	<job name="lookatore"	type="LOOK_AT" 		successjob="takeore" 	failjob="gohome" direction="NORTH_WEST" />

	<!-- take iron ore -->
	<job name="takeore" 	type="TAKE" 		successjob="goputore0" 	failjob="gohome" material="IRONORE" />

	<!-- go to the melting pot -->
	<job name="goputore0" 	type="WALK" 		successjob="goputore1" 	failjob="gohome" direction="SOUTH_WEST" />
	<job name="goputore1"	type="WALK" 		successjob="goputore2" 	failjob="gohome" direction="SOUTH_WEST" />
	<job name="goputore2" 	type="WALK" 		successjob="goputore3" 	failjob="gohome" direction="WEST" />
	<job name="goputore3" 	type="WALK"			successjob="goputore4" 	failjob="gohome" direction="WEST" />
	<job name="goputore4" 	type="WALK" 		successjob="goputore5" 	failjob="gohome" direction="WEST" />
	<job name="goputore5" 	type="WALK" 		successjob="goputore6" 	failjob="gohome" direction="NORTH_WEST" />
	<job name="goputore6" 	type="WALK" 		successjob="goputore7" 	failjob="gohome" direction="NORTH_WEST" />
	<job name="goputore7" 	type="WALK" 		successjob="goputore8" 	failjob="gohome" direction="NORTH_EAST" />

	<!-- drop the iron ore into the melting pot -->
	<job name="goputore8" 	type="DROP" 		successjob="goToCoal" 	failjob="gohome" material="NO_MATERIAL" />

	<!-- go to the coal stack -->
	<job name="goToCoal" 	type="WALK" 		successjob="takeCoal1" 	failjob="gohome" direction="WEST" />

	<!-- take the coal -->
	<job name="takeCoal1" 	type="LOOK_AT"		successjob="takeCoal2" 	failjob="gohome" direction="NORTH_WEST" />
	<job name="takeCoal2" 	type="TAKE" 		successjob="goPutCoal" 	failjob="gohome" material="COAL" />

	<!-- go to the melting pot -->
	<job name="goPutCoal" 	type="WALK" 		successjob="putCoal1" 	failjob="gohome" direction="EAST" />

	<!-- put the coal into the melting pot -->
	<job name="putCoal1" 	type="LOOK_AT" 		successjob="putCoal2" 	failjob="gohome" direction="NORTH_EAST" />
	<job name="putCoal2" 	type="DROP" 		successjob="gopot0" 	failjob="gohome" material="NO_MATERIAL" />

	<!-- go in front of the melting pot -->
	<job name="gopot0" 		type="WALK" 		successjob="gopot1" 	failjob="gohome" direction="SOUTH_WEST" />
	<job name="gopot1" 		type="WALK" 		successjob="gopot2" 	failjob="gohome" direction="SOUTH_EAST" />
	<job name="gopot2" 		type="WALK" 		successjob="gopot3" 	failjob="gohome" direction="SOUTH_EAST" />
	<job name="gopot3" 		type="WALK" 		successjob="gopot4" 	failjob="gohome" direction="EAST" />
	<job name="gopot4" 		type="WALK" 		successjob="gopot6" 	failjob="gohome" direction="EAST" />
	<job name="gopot6" 		type="LOOK_AT" 		successjob="melt"    	failjob="gohome" direction="NORTH_WEST" />
    <job name="melt" 		type="PLAY_ACTION1" successjob="takeiron"	failjob="gohome" time="5"/>

	<!-- take the iron -->
	<job name="takeiron" 	type="TAKE" 		successjob="dropIron1" 	failjob="gohome" material="IRON"  takeMaterialFromMap="false" />
	<job name="dropIron1"	type="GO_TO" 		successjob="dropIron2"	failjob="gohome" dx="4" dy="0" />
	<job name="dropIron2" 	type="DROP" 		successjob="checkB1"	failjob="gohome" material="IRON" />

	<!-- do not disappear if there is still stuff left -->
	<job name="checkB1" 	type="AVAILABLE" 	successjob="checkB2" 	failjob="gohome" dx="-3" dy="2" material="COAL" />
	<job name="checkB2" 	type="AVAILABLE" 	successjob="checkB3" 	failjob="gohome" dx="3" dy="3"  material="IRONORE" />
	<job name="checkB3" 	type="NOT_FULL" 	successjob="toore"		failjob="gohome" dx="4" dy="0" />
	<job name="toore" 		type="GO_TO" 		successjob="lookatore"	failjob="hide" 	 dx="3" dy="3" />


</building>
