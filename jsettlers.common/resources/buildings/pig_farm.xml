<?xml version="1.1" encoding="UTF-8"?>
<!DOCTYPE building SYSTEM "building.dtd">
<building worker="PIG_FARMER" workradius="0">
	<ground groundtype="GRASS" />
	<ground groundtype="EARTH" />
	<ground groundtype="FLATTENED" />

	<blocked dx="2" dy="5" block="true" />
	<blocked dx="2" dy="4" block="true" />
	<blocked dx="3" dy="5" block="true" />
	<blocked dx="4" dy="5" block="true" />
	<blocked dx="5" dy="3" block="true" />
	<blocked dx="4" dy="4" block="true" />
	<blocked dx="5" dy="2" block="true" />
	<blocked dx="4" dy="3" block="true" />
	<blocked dx="4" dy="2" block="true" />
	<blocked dx="5" dy="1" block="true" />
	<blocked dx="6" dy="2" block="true" />
	<blocked dx="4" dy="1" block="true" />
	<blocked dx="4" dy="0" block="true" />
	<blocked dx="3" dy="-1" block="true" />
	<blocked dx="2" dy="-2" block="true" />
	<blocked dx="1" dy="-2" block="true" />
	<blocked dx="1" dy="-3" block="true" />
	<blocked dx="1" dy="-1" block="true" />
	<blocked dx="1" dy="0" block="true" />
	<blocked dx="0" dy="0" block="true" />
	<blocked dx="0" dy="-1" block="true" />
	<blocked dx="0" dy="-2" block="true" />
	<blocked dx="0" dy="-3" block="true" />
	<blocked dx="-1" dy="-4" block="true" />
	<blocked dx="-2" dy="-5" block="true" />
	<blocked dx="-2" dy="-4" block="true" />
	<blocked dx="-2" dy="-3" block="true" />
	<blocked dx="-2" dy="-2" block="true" />
	<blocked dx="-3" dy="-3" block="true" />
	<blocked dx="-3" dy="-4" block="true" />
	<blocked dx="-3" dy="-2" block="true" />
	<blocked dx="-3" dy="-1" block="true" />
	<blocked dx="-3" dy="0" block="true" />
	<blocked dx="-3" dy="1" block="true" />
	<blocked dx="-2" dy="-1" block="true" />
	<blocked dx="-2" dy="0" block="true" />
	<blocked dx="-2" dy="1" block="true" />
	<blocked dx="-1" dy="-3" block="true" />
	<blocked dx="-1" dy="-2" block="true" />
	<blocked dx="-1" dy="-1" block="true" />
	<blocked dx="-1" dy="0" block="true" />
	<blocked dx="0" dy="-4" block="true" />
	<blocked dx="-1" dy="1" block="true" />
	<blocked dx="-1" dy="2" block="true" />
	<blocked dx="0" dy="2" block="true" />
	<blocked dx="2" dy="-1" block="true" />
	<blocked dx="3" dy="0" block="true" />
	<blocked dx="3" dy="4" block="true" />
	<blocked dx="0" dy="3" block="true" />
	<blocked dx="-3" dy="-5" block="true" />
	<blocked dx="5" dy="5" block="false" />
	<blocked dx="3" dy="6" block="false" />
	<blocked dx="4" dy="6" block="false" />
	<blocked dx="5" dy="6" block="false" />
	<blocked dx="5" dy="4" block="false" />
	<blocked dx="6" dy="6" block="false" />
	<blocked dx="6" dy="5" block="false" />
	<blocked dx="6" dy="4" block="false" />
	<blocked dx="6" dy="3" block="false" />
	<blocked dx="7" dy="4" block="false" />
	<blocked dx="7" dy="3" block="false" />
	<blocked dx="7" dy="2" block="false" />
	<blocked dx="6" dy="1" block="false" />
	<blocked dx="5" dy="0" block="false" />
	<blocked dx="4" dy="-1" block="false" />
	<blocked dx="3" dy="-2" block="false" />
	<blocked dx="2" dy="-3" block="false" />
	<blocked dx="1" dy="-4" block="false" />
	<blocked dx="0" dy="-5" block="false" />
	<blocked dx="-1" dy="-5" block="false" />
	<blocked dx="-2" dy="-6" block="false" />
	<blocked dx="-3" dy="-6" block="false" />
	<blocked dx="-4" dy="-5" block="false" />
	<blocked dx="-4" dy="-4" block="false" />
	<blocked dx="-4" dy="-3" block="false" />
	<blocked dx="-4" dy="-2" block="false" />
	<blocked dx="-4" dy="-1" block="false" />
	<blocked dx="-4" dy="0" block="false" />
	<blocked dx="-4" dy="1" block="false" />
	<blocked dx="-3" dy="2" block="false" />
	<blocked dx="0" dy="5" block="false" />
	<blocked dx="1" dy="6" block="false" />
	<blocked dx="2" dy="6" block="false" />
	<blocked dx="2" dy="7" block="false" />
	<blocked dx="3" dy="7" block="false" />
	<blocked dx="4" dy="7" block="false" />
	<blocked dx="5" dy="7" block="false" />
	<blocked dx="6" dy="7" block="false" />
	<blocked dx="-1" dy="4" block="false" />
	<blocked dx="-1" dy="3" block="false" />
	<blocked dx="-2" dy="2" block="false" />
	<blocked dx="-2" dy="3" block="false" />
	<blocked dx="0" dy="4" block="false" />
	<blocked dx="1" dy="5" block="false" />
	<blocked dx="1" dy="4" block="false" />
	<blocked dx="1" dy="3" block="false" />
	<blocked dx="1" dy="2" block="false" />
	<blocked dx="1" dy="1" block="false" />
	<blocked dx="2" dy="1" block="false" />
	<blocked dx="3" dy="2" block="false" />
	<blocked dx="3" dy="1" block="false" />
	<blocked dx="2" dy="0" block="false" />
	<blocked dx="3" dy="3" block="false" />
	<blocked dx="2" dy="2" block="false" />
	<blocked dx="2" dy="3" block="false" />
	<blocked dx="-4" dy="-6" block="false" />
	<blocked dx="0" dy="1" block="false" />

	<!-- real door is at dx="1" dy="2", but blocked -->
	<door dx="0" dy="1" />

	<stack dx="5" dy="5" material="CROP" buildrequired="0" />
	<!--<stack dx="-1" dy="4" material="PIG" buildrequired="0" /> -->
	<stack dx="3" dy="6" material="WATER" buildrequired="0" />
	<stack dx="1" dy="6" material="PLANK" buildrequired="1" />
	<stack dx="3" dy="6" material="STONE" buildrequired="1" />

	<bricklayer dx="-2" dy="3" direction="NORTH_EAST" />
	<bricklayer dx="0" dy="5" direction="NORTH_EAST" />
	<bricklayer dx="5" dy="6" direction="NORTH_WEST" />
	<bricklayer dx="6" dy="5" direction="NORTH_WEST" />
	<bricklayer dx="6" dy="3" direction="NORTH_WEST" />

	<flag dx="-1" dy="-2" />

	<buildmark dx="1" dy="5" />
	<buildmark dx="4" dy="5" />
	<buildmark dx="5" dy="1" />
	<buildmark dx="0" dy="3" />
	<buildmark dx="1" dy="-3" />
	<buildmark dx="-2" dy="-5" />
	<buildmark dx="-3" dy="0" />

	<image file="14" type="GUI" for="GUI" image="0" sequence="66" />
	<image file="13" type="SETTLER" for="FINAL" image="0" sequence="20" />
	<image file="13" type="SETTLER" for="BUILD" image="1" sequence="20" />

	<startjob name="gohome" />

	<!-- going home job -->
	<job name="gohome" type="GO_TO" dx="0" dy="1" successjob="hide" failjob="hide" />
	<job name="hide" type="HIDE" successjob="wait" failjob="wait" />

	<job name="wait" type="WAIT" time="3" successjob="stackNotFull" failjob="stackNotFull" />
	<job name="stackNotFull" type="NOT_FULL" dx="-1" dy="4" material="PIG" successjob="PIG1_isKillable" failjob="checkcrop" />

	<job name="PIG1_isKillable" type="PIG_IS_ADULT" dx="2" dy="2" successjob="killPig1Show1" failjob="PIG2_isKillable" />
	<job name="PIG2_isKillable" type="PIG_IS_ADULT" dx="2" dy="1" successjob="killPig2Show1" failjob="PIG3_isKillable" />
	<job name="PIG3_isKillable" type="PIG_IS_ADULT" dx="3" dy="2" successjob="killPig3Show1" failjob="PIG4_isKillable" />
	<job name="PIG4_isKillable" type="PIG_IS_ADULT" dx="3" dy="3" successjob="killPig4Show1" failjob="checkcrop" />


	<job name="checkcrop" type="AVAILABLE" material="CROP" successjob="checkwater" failjob="wait" dx="5" dy="5" />
	<job name="checkwater" type="AVAILABLE" material="WATER" successjob="feedCropShow1" failjob="wait" dx="3" dy="6" />

	<!-- get crop from stack to home -->
	<job name="feedCropShow1" type="SET_MATERIAL" material="NO_MATERIAL" successjob="feedCropShow2" failjob="wait" />
	<job name="feedCropShow2" type="LOOK_AT" direction="SOUTH_EAST" successjob="feedCropShow3" failjob="wait" />
	<job name="feedCropShow3" type="SHOW" dx="0" dy="1" successjob="feedCropGoTo" failjob="hide" />
	<job name="feedCropGoTo" type="GO_TO" dx="5" dy="5" successjob="feedCropTake1" failjob="gohome" />

	<job name="feedCropTake1" type="TAKE" material="CROP" successjob="feedCropTake2" failjob="gohome" />
	<job name="feedCropTake2" type="SET_MATERIAL" material="CROP" successjob="feedCropGoHome1" failjob="gohome" />

	<job name="feedCropGoHome1" type="GO_TO" dx="0" dy="1" successjob="feedCropGoHome2" failjob="gohome" />
	<job name="feedCropGoHome2" type="HIDE" successjob="feedWait" failjob="wait" />

	<job name="feedWait" type="WAIT" time="1" successjob="feedWaterShow1" failjob="wait" />

	<!-- get water from stack to home -->
	<job name="feedWaterShow1" type="SET_MATERIAL" material="NO_MATERIAL" successjob="feedWaterShow2" failjob="wait" />
	<job name="feedWaterShow2" type="LOOK_AT" direction="SOUTH_EAST" successjob="feedWaterShow3" failjob="wait" />
	<job name="feedWaterShow3" type="SHOW" dx="0" dy="1" successjob="feedWaterGoTo" failjob="hide" />
	<job name="feedWaterGoTo" type="GO_TO" dx="3" dy="6" successjob="feedWaterTake1" failjob="gohome" />

	<job name="feedWaterTake1" type="TAKE" material="WATER" successjob="feedWaterTake2" failjob="gohome" />
	<job name="feedWaterTake2" type="SET_MATERIAL" material="WATER" successjob="feedWaterGoHome1" failjob="gohome" />

	<job name="feedWaterGoHome1" type="GO_TO" dx="0" dy="1" successjob="feedWaterGoHome2" failjob="gohome" />
	<job name="feedWaterGoHome2" type="HIDE" successjob="PIG1_tryplace" failjob="wait" />

	<!-- place pig -->
	<job name="PIG1_tryplace" type="PIG_IS_THERE" dx="2" dy="2" successjob="PIG2_tryplace" failjob="PLACE1" />
	<job name="PIG2_tryplace" type="PIG_IS_THERE" dx="2" dy="1" successjob="PIG3_tryplace" failjob="PLACE2" />
	<job name="PIG3_tryplace" type="PIG_IS_THERE" dx="3" dy="2" successjob="PIG4_tryplace" failjob="PLACE3" />
	<job name="PIG4_tryplace" type="PIG_IS_THERE" dx="3" dy="3" successjob="wait" failjob="PLACE4" />

	<job name="PLACE1" type="PIG_PLACE" dx="2" dy="2" successjob="wait" failjob="wait" />
	<job name="PLACE2" type="PIG_PLACE" dx="2" dy="1" successjob="wait" failjob="wait" />
	<job name="PLACE3" type="PIG_PLACE" dx="3" dy="2" successjob="wait" failjob="wait" />
	<job name="PLACE4" type="PIG_PLACE" dx="3" dy="3" successjob="wait" failjob="wait" />


	<!-- kill pig1 at 2,2 -->
	<job name="killPig1Show1" type="SET_MATERIAL" material="NO_MATERIAL" successjob="killPig1Show2" failjob="wait" />
	<job name="killPig1Show2" type="LOOK_AT" direction="SOUTH_EAST" successjob="killPig1Show3" failjob="wait" />
	<job name="killPig1Show3" type="SHOW" dx="0" dy="1" successjob="killPig1GoTo" failjob="hide" />
	<job name="killPig1GoTo" type="GO_TO" dx="2" dy="2" successjob="killPig1Kill1" failjob="gohome" />

	<job name="killPig1Kill1" type="TAKE" material="PIG" successjob="killPig1Kill2" failjob="gohome" takeMaterialFromMap="false" />
	<job name="killPig1Kill2" type="PIG_REMOVE" dx="2" dy="2" successjob="deliverPigToStack1" failjob="gohome" />
	<!-- jump to common kill end -->


	<!-- kill pig2 at 2, 1 -->
	<job name="killPig2Show1" type="SET_MATERIAL" material="NO_MATERIAL" successjob="killPig2Show2" failjob="wait" />
	<job name="killPig2Show2" type="LOOK_AT" direction="SOUTH_EAST" successjob="killPig2Show3" failjob="wait" />
	<job name="killPig2Show3" type="SHOW" dx="0" dy="1" successjob="killPig2GoTo" failjob="hide" />
	<job name="killPig2GoTo" type="GO_TO" dx="2" dy="1" successjob="killPig2Kill1" failjob="gohome" />

	<job name="killPig2Kill1" type="TAKE" material="PIG" successjob="killPig2Kill2" failjob="gohome" takeMaterialFromMap="false" />
	<job name="killPig2Kill2" type="PIG_REMOVE" dx="2" dy="1" successjob="deliverPigToStack1" failjob="gohome" />
	<!-- jump to common kill end -->


	<!-- kill pig3 at 3,2 -->
	<job name="killPig3Show1" type="SET_MATERIAL" material="NO_MATERIAL" successjob="killPig3Show2" failjob="wait" />
	<job name="killPig3Show2" type="LOOK_AT" direction="SOUTH_EAST" successjob="killPig3Show3" failjob="wait" />
	<job name="killPig3Show3" type="SHOW" dx="0" dy="1" successjob="killPig3GoTo" failjob="hide" />
	<job name="killPig3GoTo" type="GO_TO" dx="3" dy="2" successjob="killPig3Kill1" failjob="gohome" />

	<job name="killPig3Kill1" type="TAKE" material="PIG" successjob="killPig3Kill2" failjob="gohome" takeMaterialFromMap="false" />
	<job name="killPig3Kill2" type="PIG_REMOVE" dx="3" dy="2" successjob="deliverPigToStack1" failjob="gohome" />
	<!-- jump to common kill end -->


	<!-- kill pig4 at 3,3 -->
	<job name="killPig4Show1" type="SET_MATERIAL" material="NO_MATERIAL" successjob="killPig4Show2" failjob="wait" />
	<job name="killPig4Show2" type="LOOK_AT" direction="SOUTH_EAST" successjob="killPig4Show3" failjob="wait" />
	<job name="killPig4Show3" type="SHOW" dx="0" dy="1" successjob="killPig4GoTo" failjob="hide" />
	<job name="killPig4GoTo" type="GO_TO" dx="3" dy="3" successjob="killPig4Kill1" failjob="gohome" />

	<job name="killPig4Kill1" type="TAKE" material="PIG" successjob="killPig4Kill2" failjob="gohome" takeMaterialFromMap="false" />
	<job name="killPig4Kill2" type="PIG_REMOVE" dx="3" dy="3" successjob="deliverPigToStack1" failjob="gohome" />
	<!-- jump to common kill end -->


	<!-- Common to all kills: walk from 1, 2 -->
	<job name="deliverPigToStack1" type="GO_TO" dx="-1" dy="4" successjob="deliverPigToStack2" failjob="gohome" />
	<job name="deliverPigToStack2" type="DROP" material="PIG" successjob="gohome" failjob="gohome" />


</building>
